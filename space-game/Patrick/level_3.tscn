extends Node2D

@export var powerup_scene: PackedScene

func _on_timer_timeout():
	if powerup_scene == null:
		print("ERROR: No powerup_scene assigned in Inspector!")
		return
		
	# 1. Create the instance
	var powerup = powerup_scene.instantiate()
	
	# 2. Calculate Screen Position
	var screen_width = get_viewport_rect().size.x
	var random_x = randf_range(50, screen_width - 50)
	
	# 3. Use GLOBAL position to ensure it spawns at the very top of the game window
	# This fixes the conflict where it spawns relative to the spawner's center
	powerup.global_position = Vector2(random_x, -50)
	
	# 4. Add to the main scene tree so it isn't hidden behind the spawner's logic
	get_tree().current_scene.add_child(powerup)
	
	print("SUCCESS: Power-up spawned at Top Y: -50")